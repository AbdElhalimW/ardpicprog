<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ardpicprog: Host program for controlling the PIC programmer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ardpicprog</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Host program for controlling the PIC programmer </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Ardpicprog is a program that runs on the host machine and controls the process of reading to and writing from a PIC or EEPROM device. It connects via a serial port to the sketch running on the Arduino that implements the PIC or EEPROM programming logic.</p>
<p>The command-line syntax of Ardpicprog is designed to be backwards-compatible with <a href="http://hyvatti.iki.fi/~jaakko/pic/picprog.html">picprog</a> to make it easy to replace invocations of picprog in existing Makefile's and build scripts.</p>
<p>The host program does not implement any specific logic for programming PIC and EEPROM devices. It merely communicates with a sketch running on the Arduino via a serial port and asks it to perform <a class="el" href="pic_programming_protocol.html#sect_cmd_read">READ</a>, <a class="el" href="pic_programming_protocol.html#sect_cmd_write">WRITE</a>, <a class="el" href="pic_programming_protocol.html#sect_cmd_erase">ERASE</a>, and other commands. The sketch itself takes care of the low-level details of talking to the device. To support a new device type, the sketch will need to be replaced with an alternative that is familiar with the low-level programming details of the new device. The <a class="el" href="pic14_zif_circuit.html">circuit</a> for the PIC programmer shield may also need to be modified.</p>
<p>Note: the Serial Monitor in the Arduino IDE should be closed while Ardpicprog is in use. Otherwise the monitor may steal some of the serial data that was intended for Ardpicprog and the reading or burning process will fail.</p>
<h2><a class="anchor" id="host_usage"></a>
Usage</h2>
<div class="fragment"><pre class="fragment">ardpicprog --quiet -q --warranty --copying --help -h
    --device DEVTYPE -d DEVTYPE --pic-serial-port PORT -p PORT
    --input-hexfile INPUT -i INPUT --output-hexfile OUTPUT -o OUTPUT
    --ihx8m --ihx16 --ihx32 --cc-hexfile CCFILE -c CCFILE --skip-ones
    --erase --burn --force-calibration --list-devices --speed SPEED
</pre></div><h2><a class="anchor" id="host_common"></a>
Common options</h2>
<dl class="user"><dt><b>--quiet</b></dt><dd>Suppress the copyright header.</dd></dl>
<dl class="user"><dt><b>--device DEVTYPE, -d DEVTYPE</b></dt><dd>Specifies the type of device that is in the programmer; e.g. <code>pic16f84</code>, <code>pic16f628a</code>, etc. If this option is not present or it is set to <b>auto</b>, then Ardpicprog will attempt to autodetect the device in the programmer. Older PIC devices that do not have an identifier word will need the <b>--device</b> option to be specified manually. The <b>--list-devices</b> option can be used to list all supported device types. See also, <a class="el" href="supported_devices.html">Supported PIC and EEPROM devices</a>.</dd></dl>
<dl class="user"><dt><b>--pic-serial-port PORT, -p PORT</b></dt><dd>Specifies the serial port tty device to use to communicate with the programmer. The default is <code>/dev/ttyACM0</code> under POSIX systems and <code>COM1</code> under Windows.</dd></dl>
<dl class="user"><dt><b>--speed SPEED</b></dt><dd>Specifies the speed of the serial connection to the programmer. The default is 9600. Other allowable values are 19200, 38400, 57600, 115200, and 230400. Note: the <code>setup()</code> function of the sketch running in the Arduino will need to be modified to use the same speed. This option is specific to Ardpicprog; it does not exist in picprog.</dd></dl>
<h2><a class="anchor" id="host_reading"></a>
Reading from a PIC or EEPROM device</h2>
<div class="fragment"><pre class="fragment">ardpicprog --output-hexfile OUTPUT --skip-ones
</pre></div><dl class="user"><dt><b>--output-hexfile OUTPUT, -o OUTPUT</b></dt><dd>Reads the entire contents of the device and writes them in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format to OUTPUT.</dd></dl>
<dl class="user"><dt><b>--skip-ones</b></dt><dd>Ignores any word from the device that is all-ones; i.e. not set to a specific value.</dd></dl>
<dl class="user"><dt><b>--ihx8m, --ihx16, --ihx32</b></dt><dd>Selects the type of HEX file to write to OUTPUT. The default is <b>--ihx16</b> for low and mid-range PIC devices and <b>--ihx32</b> for high-range PIC devices.</dd></dl>
<h2><a class="anchor" id="host_burning"></a>
Burning a PIC or EEPROM device</h2>
<div class="fragment"><pre class="fragment">ardpicprog --erase --burn --input-hexfile INPUT
</pre></div><dl class="user"><dt><b>--erase</b></dt><dd>Erases the device before burning program, data, and configuration words onto it.</dd></dl>
<dl class="user"><dt><b>--burn</b></dt><dd>Burn program, data, and configuration words onto the PIC or EEPROM device. The words will be read back after burning to verify that they have been written correctly.</dd></dl>
<dl class="user"><dt><b>--input-hexfile INPUT, -i INPUT</b></dt><dd>Specifies the HEX file whose contents should be written to the device. The input must be in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format, be it IHX8M, IHX16, or IHX32. The contents of the HEX file must be suitable for the type of device in the programmer.</dd></dl>
<dl class="user"><dt><b>--cc-hexfile CCFILE, -c CCFILE</b></dt><dd>After reading the contents of the input INPUT, write the contents back out to CCFILE. This is intended for debugging purposes to verify that the INPUT was read correctly.</dd></dl>
<dl class="user"><dt><b>--force-calibration</b></dt><dd>Forces the calibration words (e.g. OSCCAL) in the PIC device, if any, to be erased and overwritten with the values from the INPUT. If this option is not specified then the programmer will preserve the original calibration words. If <b>--force-calibration</b> is not specified, then calibration words that appear in INPUT will be ignored.</dd></dl>
<dl class="user"><dt><b>--output-hexfile OUTPUT, -o OUTPUT</b></dt><dd>After burning, read back the contents of the device and write them to OUTPUT.</dd></dl>
<h2><a class="anchor" id="host_other"></a>
Other options</h2>
<dl class="user"><dt><b>--list-devices</b></dt><dd>Lists all of the PIC or EEPROM devices that are supported by the programmer sketch running on the Arduino. If your device type does not appear in this list, then you will need a new version of the sketch. This option is specific to Ardpicprog; it does not exist in picprog.</dd></dl>
<dl class="user"><dt><b>--help</b></dt><dd>Prints usage information for Ardpicprog.</dd></dl>
<dl class="user"><dt><b>--copying</b></dt><dd>Prints the GNU General Public License, Version 3.</dd></dl>
<dl class="user"><dt><b>--warranty</b></dt><dd>Prints the warranty disclaimer.</dd></dl>
<h2><a class="anchor" id="host_ignored"></a>
Ignored options</h2>
<p>The following options are provided for backwards-compatibility with picprog, but are ignored by Ardpicprog:</p>
<dl class="user"><dt><b>--jdm</b></dt><dd></dd></dl>
<dl class="user"><dt><b>--k8048</b></dt><dd></dd></dl>
<dl class="user"><dt><b>--nordtsc</b></dt><dd></dd></dl>
<dl class="user"><dt><b>--rdtsc</b></dt><dd></dd></dl>
<dl class="user"><dt><b>--reboot</b></dt><dd></dd></dl>
<dl class="user"><dt><b>--slow</b></dt><dd></dd></dl>
<h2><a class="anchor" id="host_environment"></a>
Environment</h2>
<dl class="user"><dt><b>PIC_DEVICE</b></dt><dd>PIC or EEPROM device to read or burn. Defaults to autodetection of the device type. The <b>--device</b> option overrides this environment variable.</dd></dl>
<dl class="user"><dt><b>PIC_PORT</b></dt><dd>Specifies the serial port tty device to use to communicate with the programmer. The default is <code>/dev/ttyACM0</code> under POSIX systems and <code>COM1</code> under Windows. The <b>--pic-serial-port</b> option overrides this environment variable.</dd></dl>
<h2><a class="anchor" id="host_exit"></a>
Exit values</h2>
<dl class="user"><dt><b>0</b></dt><dd>The reading or burning process completed with no error.</dd></dl>
<dl class="user"><dt><b>64</b></dt><dd>There was a problem with the command-line syntax.</dd></dl>
<dl class="user"><dt><b>65</b></dt><dd>INPUT is not in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format.</dd></dl>
<dl class="user"><dt><b>66</b></dt><dd>Could not open INPUT or CCFILE.</dd></dl>
<dl class="user"><dt><b>74</b></dt><dd>An error occurred while talking to the programmer, the burning process failed for some reason (e.g. read-back of contents did not match), or there was a problem when writing to OUTPUT.</dd></dl>
<dl class="user"><dt><b>76</b></dt><dd>The device is unknown to the programmer. </dd></dl>
</div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sun May 6 2012 15:04:52 for Ardpicprog by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
