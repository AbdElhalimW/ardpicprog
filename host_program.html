<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ardpicprog: Host program for controlling the PIC programmer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ardpicprog
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Host program for controlling the PIC programmer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Ardpicprog is a program that runs on the host machine and controls the process of reading to and writing from a PIC or EEPROM device. It connects via a serial port to the sketch running on the Arduino that implements the PIC or EEPROM programming logic.</p>
<p>The command-line syntax of Ardpicprog is designed to be backwards-compatible with <a href="http://hyvatti.iki.fi/~jaakko/pic/picprog.html">picprog</a> to make it easy to replace invocations of picprog in existing Makefile's and build scripts.</p>
<p>The host program does not implement any specific logic for programming PIC and EEPROM devices. It merely communicates with a sketch running on the Arduino via a serial port and asks it to perform <a class="el" href="pic_programming_protocol.html#sect_cmd_read">READ</a>, <a class="el" href="pic_programming_protocol.html#sect_cmd_write">WRITE</a>, <a class="el" href="pic_programming_protocol.html#sect_cmd_erase">ERASE</a>, and other commands. The sketch itself takes care of the low-level details of talking to the device. To support a new device type, the sketch will need to be replaced with an alternative that is familiar with the low-level programming details of the new device. The <a class="el" href="pic14_zif_circuit.html">circuit</a> for the PIC programmer shield may also need to be modified.</p>
<p>Note: the Serial Monitor in the Arduino IDE should be closed while Ardpicprog is in use. Otherwise the monitor may steal some of the serial data that was intended for Ardpicprog and the reading or burning process will fail.</p>
<h1><a class="anchor" id="host_usage"></a>
Usage</h1>
<div class="fragment"><div class="line">ardpicprog --quiet -q --warranty --copying --help -h</div>
<div class="line">    --device DEVTYPE -d DEVTYPE --pic-serial-port PORT -p PORT</div>
<div class="line">    --input-hexfile INPUT -i INPUT --output-hexfile OUTPUT -o OUTPUT</div>
<div class="line">    --ihx8m --ihx16 --ihx32 --cc-hexfile CCFILE -c CCFILE --skip-ones</div>
<div class="line">    --erase --burn --force-calibration --list-devices --speed SPEED</div>
</div><!-- fragment --><h1><a class="anchor" id="host_common"></a>
Common options</h1>
<dl class="section user"><dt>&ndash;quiet</dt><dd>Suppress the copyright header.</dd></dl>
<dl class="section user"><dt>&ndash;device DEVTYPE, -d DEVTYPE</dt><dd>Specifies the type of device that is in the programmer; e.g. <code>pic16f84</code>, <code>pic16f628a</code>, etc. If this option is not present or it is set to <b>auto</b>, then Ardpicprog will attempt to autodetect the device in the programmer. Older PIC devices that do not have an identifier word will need the <b>&ndash;device</b> option to be specified manually. The <b>&ndash;list-devices</b> option can be used to list all supported device types. See also, <a class="el" href="supported_devices.html">Supported PIC and EEPROM devices</a>.</dd></dl>
<dl class="section user"><dt>&ndash;pic-serial-port PORT, -p PORT</dt><dd>Specifies the serial port tty device to use to communicate with the programmer. The default is <code>/dev/ttyACM0</code> under POSIX systems and <code>COM1</code> under Windows.</dd></dl>
<dl class="section user"><dt>&ndash;speed SPEED</dt><dd>Specifies the speed of the serial connection to the programmer. The default is 9600. Other allowable values are 19200, 38400, 57600, 115200, and 230400. Note: the <code>setup()</code> function of the sketch running in the Arduino will need to be modified to use the same speed. This option is specific to Ardpicprog; it does not exist in picprog.</dd></dl>
<h1><a class="anchor" id="host_reading"></a>
Reading from a PIC or EEPROM device</h1>
<div class="fragment"><div class="line">ardpicprog --output-hexfile OUTPUT --skip-ones</div>
</div><!-- fragment --><dl class="section user"><dt>&ndash;output-hexfile OUTPUT, -o OUTPUT</dt><dd>Reads the entire contents of the device and writes them in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format to OUTPUT.</dd></dl>
<dl class="section user"><dt>&ndash;skip-ones</dt><dd>Ignores any word from the device that is all-ones; i.e. not set to a specific value.</dd></dl>
<dl class="section user"><dt>&ndash;ihx8m, &ndash;ihx16, &ndash;ihx32</dt><dd>Selects the type of HEX file to write to OUTPUT. The default is <b>&ndash;ihx16</b> for low and mid-range PIC devices and <b>&ndash;ihx32</b> for high-range PIC devices.</dd></dl>
<h1><a class="anchor" id="host_burning"></a>
Burning a PIC or EEPROM device</h1>
<div class="fragment"><div class="line">ardpicprog --erase --burn --input-hexfile INPUT</div>
</div><!-- fragment --><dl class="section user"><dt>&ndash;erase</dt><dd>Erases the device before burning program, data, and configuration words onto it.</dd></dl>
<dl class="section user"><dt>&ndash;burn</dt><dd>Burn program, data, and configuration words onto the PIC or EEPROM device. The words will be read back after burning to verify that they have been written correctly.</dd></dl>
<dl class="section user"><dt>&ndash;input-hexfile INPUT, -i INPUT</dt><dd>Specifies the HEX file whose contents should be written to the device. The input must be in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format, be it IHX8M, IHX16, or IHX32. The contents of the HEX file must be suitable for the type of device in the programmer.</dd></dl>
<dl class="section user"><dt>&ndash;cc-hexfile CCFILE, -c CCFILE</dt><dd>After reading the contents of the input INPUT, write the contents back out to CCFILE. This is intended for debugging purposes to verify that the INPUT was read correctly.</dd></dl>
<dl class="section user"><dt>&ndash;force-calibration</dt><dd>Forces the calibration words (e.g. OSCCAL) in the PIC device, if any, to be erased and overwritten with the values from the INPUT. If this option is not specified then the programmer will preserve the original calibration words. If <b>&ndash;force-calibration</b> is not specified, then calibration words that appear in INPUT will be ignored.</dd></dl>
<dl class="section user"><dt>&ndash;output-hexfile OUTPUT, -o OUTPUT</dt><dd>After burning, read back the contents of the device and write them to OUTPUT.</dd></dl>
<h1><a class="anchor" id="host_other"></a>
Other options</h1>
<dl class="section user"><dt>&ndash;list-devices</dt><dd>Lists all of the PIC or EEPROM devices that are supported by the programmer sketch running on the Arduino. If your device type does not appear in this list, then you will need a new version of the sketch. This option is specific to Ardpicprog; it does not exist in picprog.</dd></dl>
<dl class="section user"><dt>&ndash;help</dt><dd>Prints usage information for Ardpicprog.</dd></dl>
<dl class="section user"><dt>&ndash;copying</dt><dd>Prints the GNU General Public License, Version 3.</dd></dl>
<dl class="section user"><dt>&ndash;warranty</dt><dd>Prints the warranty disclaimer.</dd></dl>
<h1><a class="anchor" id="host_ignored"></a>
Ignored options</h1>
<p>The following options are provided for backwards-compatibility with picprog, but are ignored by Ardpicprog:</p>
<dl class="section user"><dt>&ndash;jdm</dt><dd></dd></dl>
<dl class="section user"><dt>&ndash;k8048</dt><dd></dd></dl>
<dl class="section user"><dt>&ndash;nordtsc</dt><dd></dd></dl>
<dl class="section user"><dt>&ndash;rdtsc</dt><dd></dd></dl>
<dl class="section user"><dt>&ndash;reboot</dt><dd></dd></dl>
<dl class="section user"><dt>&ndash;slow</dt><dd></dd></dl>
<h1><a class="anchor" id="host_environment"></a>
Environment</h1>
<dl class="section user"><dt>PIC_DEVICE</dt><dd>PIC or EEPROM device to read or burn. Defaults to autodetection of the device type. The <b>&ndash;device</b> option overrides this environment variable.</dd></dl>
<dl class="section user"><dt>PIC_PORT</dt><dd>Specifies the serial port tty device to use to communicate with the programmer. The default is <code>/dev/ttyACM0</code> under POSIX systems and <code>COM1</code> under Windows. The <b>&ndash;pic-serial-port</b> option overrides this environment variable.</dd></dl>
<h1><a class="anchor" id="host_exit"></a>
Exit values</h1>
<dl class="section user"><dt>0</dt><dd>The reading or burning process completed with no error.</dd></dl>
<dl class="section user"><dt>64</dt><dd>There was a problem with the command-line syntax.</dd></dl>
<dl class="section user"><dt>65</dt><dd>INPUT is not in <a href="http://en.wikipedia.org/wiki/Intel_HEX">Intel HEX</a> format.</dd></dl>
<dl class="section user"><dt>66</dt><dd>Could not open INPUT or CCFILE.</dd></dl>
<dl class="section user"><dt>74</dt><dd>An error occurred while talking to the programmer, the burning process failed for some reason (e.g. read-back of contents did not match), or there was a problem when writing to OUTPUT.</dd></dl>
<dl class="section user"><dt>76</dt><dd>The device is unknown to the programmer. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 27 2013 08:58:06 for Ardpicprog by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
